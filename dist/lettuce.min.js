/*! lettuce 18-01-2015 */
!function(a){"use strict";var b=function(){};b.VERSION="0.0.8",a.lettuce=b,b.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},b.isFunction=function(a){return"function"==typeof a||!1},b.defaults=function(a){if(!b.isObject(a))return a;for(var c=1,d=arguments.length;d>c;c++){var e=arguments[c];for(var f in e)void 0===a[f]&&(a[f]=e[f])}return a},b.extend=function(a){if(!b.isObject(a))return a;for(var c,d,e=1,f=arguments.length;f>e;e++){c=arguments[e];for(d in c)hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.prototype.Class=function(a,b){var c=function d(c,e){function f(){var a=this instanceof f?this:new g;return a.init.apply(a,arguments),a}function g(){}f.Basic=g;var h=g[a]=c[a],i=g[a]=f[a]=new g;i.constructor=f,f.extend=function(a){return new d(f,a)};var j=f.open=function(a){if("function"==typeof a&&(a=a.call(f,i,h,f,c)),"object"==typeof a)for(var d in a)b.call(a,d)&&(i[d]=a[d]);return"init"in i||(i.init=c),f};return j(e)};return c}("prototype",{}.hasOwnProperty);var c=new b.prototype.Class({});c.prototype.init=function(a){this.options=a||{},b.defaults(this.options,{first:"first",regex:/.*Page/,last:"last"})},c.prototype.run=function(a){this.methods=a,this.execute(this.options.first);for(var b in this.methods)b!==this.options.last&&b.match(this.options.regex)&&this.execute(b);this.execute(this.options.last)},c.prototype.execute=function(a){this.methods[a]()};var d={Parser:c};b.prototype=b.extend(b.prototype,d),b.get=function(a,c){b.send(a,"GET",c)},b.post=function(a,c,d){b.send(a,"POST",d,c)},b.send=function(a,b,c,d){d=d||null;var e=new XMLHttpRequest;c instanceof Function&&(e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)}),e.open(b,a,!0),d instanceof Object&&(d=JSON.stringify(d),e.setRequestHeader("Content-Type","application/json")),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(d)};var e={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},f={Event:e};b.prototype=b.extend(b.prototype,f);var g=function(a,b){var c=/[^\w\-\.:]/.test(a)?new Function(g.arg+",tmpl","var _e=tmpl.encode"+g.helper+",_s='"+a.replace(g.regexp,g.func)+"';return _s;"):g.cache[a]=g.cache[a]||g(g.load(a));return c(b,g)};g.cache={},g.load=function(a){return document.getElementById(a).innerHTML},g.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,g.func=function(a,b,c,d,e,f){return b?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[b]||"\\"+b:c?"="===c?"'+_e("+d+")+'":"'+("+d+"==null?'':"+d+")+'":e?"';":f?"_s+='":void 0},g.encReg=/[<>&"'\x00]/g,g.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},g.encode=function(a){return(null==a?"":""+a).replace(g.encReg,function(a){return g.encMap[a]||""})},g.arg="o",g.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}",b.prototype.tmpl=b.tmpl=g;var h=new b.prototype.Class({});h.prototype.init=function(){},h.prototype.render=function(a,b){document.getElementById(b).innerHTML=a};var i={SimpleView:h};b.prototype=b.extend(b.prototype,i);var j={routes:[],mode:null,root:"/",hashStrip:/^#*/,location:window.location,getFragment:function(){return this.location.hash.replace(this.hashStrip,"")},add:function(a,c){return b.isFunction(a)&&(c=a,a=""),this.routes.push({regex:a,handler:c}),this},check:function(a,b){for(var c=a||b.getFragment(),d=0;d<b.routes.length;d++){var e="#"+c,f=e.match(b.routes[d].regex);f&&(f.shift(),b.routes[d].handler.apply({},f))}},load:function(){var a=this,b=a.getFragment(),c=function(){b===a.getFragment()&&a.check(b,a)};return clearInterval(this.interval),this.interval=setInterval(c,50),this},navigate:function(a){return a=a?a:"",this.location.href.match(/#(.*)$/),this.location.href=this.location.href.replace(/#(.*)$/,"")+"#"+a,this}},k={Router:j};b.prototype=b.extend(b.prototype,k)}(this);