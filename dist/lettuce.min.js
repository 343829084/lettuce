/*! lettuce 23-01-2015 */
!function(a){"use strict";function b(){this._callbacks=[]}var c=function(){};c.VERSION="0.1.1",a.lettuce=c,c.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},c.isFunction=function(a){return"function"==typeof a||!1},c.defaults=function(a){if(!c.isObject(a))return a;for(var b=1,d=arguments.length;d>b;b++){var e=arguments[b];for(var f in e)void 0===a[f]&&(a[f]=e[f])}return a},c.extend=function(a){if(!c.isObject(a))return a;for(var b,d,e=1,f=arguments.length;f>e;e++){b=arguments[e];for(d in b)hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a},c.prototype.Class=function(a,b){var d=function e(d,f){function g(){var a=this instanceof g?this:new h;return a.init.apply(a,arguments),a}function h(){}g.Basic=h;var i=h[a]=d[a],j=h[a]=g[a]=new h;j.constructor=g,g.extend=function(a){return new e(g,a)};var k=g.open=function(a){if(c.isFunction(a)&&(a=a.call(g,j,i,g,d)),c.isObject(a))for(var e in a)b.call(a,e)&&(j[e]=a[e]);return"init"in j||(j.init=d),g};return k(f)};return d}("prototype",{}.hasOwnProperty);var d=new c.prototype.Class({});d.prototype.init=function(a){this.options=a||{},c.defaults(this.options,{first:"first",regex:/.*Page/,last:"last"})},d.prototype.run=function(a){var b=this;b.methods=a,b.execute(b.options.first);for(var c in b.methods)c!==b.options.last&&c.match(b.options.regex)&&this.execute(c);b.execute(b.options.last)},d.prototype.execute=function(a){this.methods[a]()};var e={Parser:d};c.prototype=c.extend(c.prototype,e),c.get=function(a,b){c.send(a,"GET",b)},c.post=function(a,b,d){c.send(a,"POST",d,b)},c.send=function(a,b,c,d){d=d||null;var e=new XMLHttpRequest;c instanceof Function&&(e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)}),e.open(b,a,!0),d instanceof Object&&(d=JSON.stringify(d),e.setRequestHeader("Content-Type","application/json")),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(d)};var f={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},g={Event:f};c.prototype=c.extend(c.prototype,g);var h={regexp:/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,encReg:/[<>&"'\x00]/g,encMap:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},arg:"o",helper:",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}",tmpl:function(a,b){var c=/[^\w\-\.:]/.test(a)?this.compile(a):"";return c(b,this)},compile:function(a){var b,c;return c=this.arg+",tmpl",b="var _e=tmpl.encode"+this.helper+",_s='"+a.replace(this.regexp,this.func)+"';",b+="return _s;",new Function(c,b)},encode:function(a){var b=/[<>&"'\x00]/g,c={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return(null==a?"":""+a).replace(b,function(a){return c[a]||""})},func:function(a,b,c,d,e,f){var g={"\n":"\\n","\r":"\\r","	":"\\t"," ":" "};return b?g[b]||"\\"+b:c?"="===c?"'+_e("+d+")+'":"'+("+d+"==null?'':"+d+")+'":e?"';":f?"_s+='":void 0}},i={Template:h};c.prototype=c.extend(c.prototype,i);var j=new c.prototype.Class({});j.prototype.init=function(){},j.prototype.render=function(a,b){document.getElementById(b).innerHTML=a};var k={SimpleView:j};c.prototype=c.extend(c.prototype,k),b.prototype.then=function(a,c){var d;return this._isdone?d=a.apply(c,this.result):(d=new b,this._callbacks.push(function(){var b=a.apply(c,arguments);b&&"function"==typeof b.then&&b.then(d.done,d)})),d},b.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var a=0;a<this._callbacks.length;a++)this._callbacks[a].apply(null,arguments);this._callbacks=[]};var l={Promise:b};c.prototype=c.extend(c.prototype,l);var m={slideDown:function(a,b,c){var d=a.style;d.height="0px";var e=0,f=10,g=b/f,h=c/g,i=1e3,j=i/f,k=function(){e+=h,d.height=e+"px",c>e&&setTimeout(k,j)};k()}},n={easing:{linear:function(a){return a},quadratic:function(a){return Math.pow(a,2)},swing:function(a){return.5-Math.cos(a*Math.PI)/2},circ:function(a){return 1-Math.sin(Math.acos(a))},back:function(a,b){return Math.pow(a,2)*((b+1)*a-b)},bounce:function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a>=(7-4*b)/11)return-Math.pow((11-6*b-11*a)/4,2)+Math.pow(c,2)},elastic:function(a,b){return Math.pow(2,10*(a-1))*Math.cos(20*Math.PI*b/3*a)}},animate:function(a){var b=new Date,c=setInterval(function(){var d=new Date-b,e=d/a.duration;e>1&&(e=1),a.progress=e;var f=a.delta(e);a.step(f),1==e&&(clearInterval(c),a.complete())},a.delay||10)},fadeOut:function(a,b){var c=1;this.animate({duration:b.duration,delta:function(a){return a=this.progress,n.easing.swing(a)},complete:b.complete,step:function(b){a.style.opacity=c-b}})},fadeIn:function(a,b){var c=0;this.animate({duration:b.duration,delta:function(a){return a=this.progress,n.easing.swing(a)},complete:b.complete,step:function(b){a.style.opacity=c+b}})}},o={Effect:m},p={FX:n};c.prototype=c.extend(c.prototype,p),c.prototype=c.extend(c.prototype,o);var q={routes:[],hashStrip:/^#*/,location:window.location,getFragment:function(){return this.location.hash.replace(this.hashStrip,"")},add:function(a,b){return c.isFunction(a)&&(b=a,a=""),this.routes.push({regex:a,handler:b}),this},check:function(a){for(var b=a.getFragment(),c=0;c<a.routes.length;c++){var d="#"+b,e=d.match(a.routes[c].regex);e&&(e.shift(),a.routes[c].handler.apply({},e))}},load:function(){function a(){window.addEventListener?window.addEventListener("hashchange",c,!1):window.attachEvent&&window.attachEvent("onhashchange",c)}var b,c;return b=this,c=function(){b.check(b)},a(),this},navigate:function(a){return a=a?a:"",this.location.href.match(/#(.*)$/),this.location.href=this.location.href.replace(/#(.*)$/,"")+"#"+a,this}},r={Router:q};c.prototype=c.extend(c.prototype,r)}(this);