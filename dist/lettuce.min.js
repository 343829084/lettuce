/*! lettuce 06-01-2015 */
!function(a){"use strict";function b(){this._callbacks=[]}function c(a){var b;return b=this instanceof c?this:f(c.prototype),b["class"]=c,b["super"]=a.prototype,b}var d=function(){};d.VERSION="0.0.1",a.lettuce=d,d.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},d.extend=function(a){if(!d.isObject(a))return a;for(var b,c,e=1,f=arguments.length;f>e;e++){b=arguments[e];for(c in b)hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a},b.prototype.then=function(a,c){var d;return this._isdone?d=a.apply(c,this.result):(d=new b,this._callbacks.push(function(){var b=a.apply(c,arguments);b&&"function"==typeof b.then&&b.then(d.done,d)})),d},b.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var a=0;a<this._callbacks.length;a++)this._callbacks[a].apply(null,arguments);this._callbacks=[]};var e={Promise:b};d.prototype=d.extend(d.prototype,e);var f;f="function"==typeof Object.create?Object.create:function(a){function b(){}return b.prototype=a,new b},d.prototype.Class=c,d.get=function(a,b){d.send(a,"GET",b)},d.post=function(a,b,c){d.send(a,"POST",c,b)},d.send=function(a,b,c,d){d=d||null;var e=new XMLHttpRequest;c instanceof Function&&(e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)}),e.open(b,a,!0),d instanceof Object&&(d=JSON.stringify(d),e.setRequestHeader("Content-Type","application/json")),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(d)};var g=function(a,b){var c=/[^\w\-\.:]/.test(a)?new Function(g.arg+",tmpl","var _e=tmpl.encode"+g.helper+",_s='"+a.replace(g.regexp,g.func)+"';return _s;"):g.cache[a]=g.cache[a]||g(g.load(a));return b?c(b,g):function(a){return c(a,g)}};g.cache={},g.load=function(a){return document.getElementById(a).innerHTML},g.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,g.func=function(a,b,c,d,e,f){return b?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[b]||"\\"+b:c?"="===c?"'+_e("+d+")+'":"'+("+d+"==null?'':"+d+")+'":e?"';":f?"_s+='":void 0},g.encReg=/[<>&"'\x00]/g,g.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},g.encode=function(a){return(null==a?"":""+a).replace(g.encReg,function(a){return g.encMap[a]||""})},g.arg="o",g.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}",d.prototype.tmpl=g;var h={routes:[],mode:null,root:"/",hashStrip:/^#*/,getFragment:function(a){return(a||window.location).hash.replace(this.hashStrip,"")},add:function(a,b){return"function"==typeof a&&(b=a,a=""),this.routes.push({re:a,handler:b}),this},check:function(a,b){for(var c=a||b.getFragment(),d=0;d<b.routes.length;d++){var e="#"+c,f=e.match(b.routes[d].re);f&&(f.shift(),b.routes[d].handler.apply({},f))}},load:function(){var a=this,b=a.getFragment(),c=function(){b!==a.getFragment()?b=a.getFragment():a.check(b,a)};return clearInterval(this.interval),this.interval=setInterval(c,50),this},navigate:function(a){return a=a?a:"",window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a,this}},i={Router:h};d.prototype=d.extend(d.prototype,i)}(this);